<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.maritime.dao.ScoreMapper">
  <resultMap id="BaseResultMap" type="com.maritime.models.Score">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    <id column="sid" jdbcType="INTEGER" property="sid" />
    <result column="seid" jdbcType="INTEGER" property="seid" />
    <result column="ssid" jdbcType="INTEGER" property="ssid" />
    <result column="score" jdbcType="VARCHAR" property="score" />
    <result column="point" jdbcType="REAL" property="point" />
    <result column="is_active" jdbcType="BIT" property="isActive" />
    <result column="sdescription" jdbcType="VARCHAR" property="sdescription" />
    <result column="last_update_user" jdbcType="VARCHAR" property="lastUpdateUser" />
    <result column="last_update_dt" jdbcType="TIMESTAMP" property="lastUpdateDt" />

      <result column="cnumber" jdbcType="BIGINT" property="cnumber" />
      <result column="cname" jdbcType="VARCHAR" property="cname" />
      <result column="cpoint" jdbcType="REAL" property="cpoint" />
      <result column="term" jdbcType="VARCHAR" property="term" />
      <result column="aname" jdbcType="VARCHAR" property="aname" />
      <result column="ccategory" jdbcType="VARCHAR" property="ccategory" />
      <result column="ctype" jdbcType="VARCHAR" property="ctype" />
      <result column="examtype" jdbcType="VARCHAR" property="examtype" />
      <result column="ename" jdbcType="VARCHAR" property="ename" />
      <result column="totalscore" jdbcType="REAL" property="totalscore" />
      <result column="finalscore" jdbcType="VARCHAR" property="finalscore" />
      <result column="finalpoint" jdbcType="REAL" property="finalpoint" />
      <result column="tname" jdbcType="VARCHAR" property="tname" />
      <result column="chour" jdbcType="INTEGER" property="chour" />
      <result column="mapid" jdbcType="INTEGER" property="mapid" />
      <result column="eform" jdbcType="VARCHAR" property="eform" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    sid, seid, ssid, score, point, is_active, sdescription, last_update_user, last_update_dt
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from maritime.score
    where sid = #{sid,jdbcType=INTEGER}
  </select>
    <select id="selectForFinalScore" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select m.pid as mapid,
        c.conumber as cnumber,c.coname as cname,c.copoint as cpoint,c.cohour as chour,m.pterm as term,fin.ename as ename,
        fin.etotalscore as totalscore,a.aname as aname,cat.ldvalue as ccategory,typ.ldvalue as ctype,final.score as finalscore,final.point as finalpoint,
        t.tname as tname
        from maritime.scmapping m
        left join maritime.course c on m.pcid = c.coid
        left join maritime.examination fin on m.pcid = fin.ecid and m.pterm = fin.eterm and fin.is_active = true and fin.etype = 9
        left join maritime.score final on final.ssid = m.psid and final.seid = fin.eid and final.is_active = true
        left join maritime.student d on final.ssid = d.sid
        left join maritime.teacher t on t.tid = c.coteacher1
        left join maritime.academy a on c.coacademy = a.aid
        left join maritime.listdata cat on c.cocategory = cat.ldid
        left join maritime.listdata typ on c.cotype = typ.ldid
        left join maritime.listdata examt on fin.etype = examt.ldid
        where m.psid =  #{sid,jdbcType=BIGINT}
    </select>
    <select id="selectForAllScore" parameterType="com.maritime.models.Score" resultMap="BaseResultMap">
        select s.score,s.point,e.ename as ename,e.total_time as totaltime,
        e.etotalscore as totalscore,examt.ldvalue as examtype,form.ldvalue as eform
        from maritime.scmapping m
        left join maritime.examination e on m.pcid = e.ecid and m.pterm = e.eterm and e.is_active = true
        left join maritime.score s on s.ssid = m.psid and s.seid = e.eid and s.is_active = true
        left join maritime.student d on s.ssid = d.sid
        left join maritime.course c on e.ecid = c.coid
        left join maritime.listdata form on e.eform = form.ldid
        left join maritime.listdata examt on e.etype = examt.ldid
        where m.psid = #{ssid,jdbcType=BIGINT} and m.pid = #{mapid,jdbcType=BIGINT}
    </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    delete from maritime.score
    where sid = #{sid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.maritime.models.Score">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    insert into maritime.score (sid, seid, ssid, 
      score, point, is_active, sdescription, 
      last_update_user, last_update_dt)
    values (#{sid,jdbcType=INTEGER}, #{seid,jdbcType=INTEGER}, #{ssid,jdbcType=INTEGER}, 
      #{score,jdbcType=VARCHAR}, #{point,jdbcType=REAL}, #{isActive,jdbcType=BIT}, #{sdescription,jdbcType=VARCHAR}, 
      #{lastUpdateUser,jdbcType=VARCHAR}, #{lastUpdateDt,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.maritime.models.Score">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    insert into maritime.score
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="sid != null">
        sid,
      </if>
      <if test="seid != null">
        seid,
      </if>
      <if test="ssid != null">
        ssid,
      </if>
      <if test="score != null">
        score,
      </if>
      <if test="point != null">
        point,
      </if>
      <if test="isActive != null">
        is_active,
      </if>
      <if test="sdescription != null">
        sdescription,
      </if>
      <if test="lastUpdateUser != null">
        last_update_user,
      </if>
      <if test="lastUpdateDt != null">
        last_update_dt,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="sid != null">
        #{sid,jdbcType=INTEGER},
      </if>
      <if test="seid != null">
        #{seid,jdbcType=INTEGER},
      </if>
      <if test="ssid != null">
        #{ssid,jdbcType=INTEGER},
      </if>
      <if test="score != null">
        #{score,jdbcType=VARCHAR},
      </if>
      <if test="point != null">
        #{point,jdbcType=REAL},
      </if>
      <if test="isActive != null">
        #{isActive,jdbcType=BIT},
      </if>
      <if test="sdescription != null">
        #{sdescription,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateUser != null">
        #{lastUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateDt != null">
        #{lastUpdateDt,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.maritime.models.Score">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    update maritime.score
    <set>
      <if test="seid != null">
        seid = #{seid,jdbcType=INTEGER},
      </if>
      <if test="ssid != null">
        ssid = #{ssid,jdbcType=INTEGER},
      </if>
      <if test="score != null">
        score = #{score,jdbcType=VARCHAR},
      </if>
      <if test="point != null">
        point = #{point,jdbcType=REAL},
      </if>
      <if test="isActive != null">
        is_active = #{isActive,jdbcType=BIT},
      </if>
      <if test="sdescription != null">
        sdescription = #{sdescription,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateUser != null">
        last_update_user = #{lastUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateDt != null">
        last_update_dt = #{lastUpdateDt,jdbcType=TIMESTAMP},
      </if>
    </set>
    where sid = #{sid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.maritime.models.Score">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Apr 19 22:55:14 CST 2017.
    -->
    update maritime.score
    set seid = #{seid,jdbcType=INTEGER},
      ssid = #{ssid,jdbcType=INTEGER},
      score = #{score,jdbcType=VARCHAR},
      point = #{point,jdbcType=REAL},
      is_active = #{isActive,jdbcType=BIT},
      sdescription = #{sdescription,jdbcType=VARCHAR},
      last_update_user = #{lastUpdateUser,jdbcType=VARCHAR},
      last_update_dt = #{lastUpdateDt,jdbcType=TIMESTAMP}
    where sid = #{sid,jdbcType=INTEGER}
  </update>
</mapper>